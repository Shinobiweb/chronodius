<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Uchronie des véhicules • Starter 1925–1949</title>
  <style>
    :root {
      --bg: #0b1020;
      --fg: #e6e9f5;
      --muted: #aab0c4;
      --panel: #121833;
      --accent: #86e1ff;
      --btn: #1a224a;
      --btn-fg: #dbe6ff;
      --ring: #86e1ff66;
    }
    .theme-light{ --bg:#f5f7fb; --fg:#101223; --muted:#5b6177; --panel:#ffffff; --accent:#2b79ff; --btn:#e8ecf9; --btn-fg:#0f1a3a; --ring:#2b79ff55; }
    .theme-dark { --bg:#0b1020; --fg:#e6e9f5; --muted:#aab0c4; --panel:#121833; --accent:#86e1ff; --btn:#1a224a; --btn-fg:#dbe6ff; --ring:#86e1ff66; }
    .theme-night{ --bg:#04050b; --fg:#d6d9eb; --muted:#9aa2c0; --panel:#0a0f24; --accent:#9a7bff; --btn:#10183a; --btn-fg:#e6e6ff; --ring:#9a7bff55; }

    html,body{height:100%;}
    body{
      margin:0; background:var(--bg); color:var(--fg); font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, sans-serif;
      line-height:1.45; letter-spacing:.2px;
    }
    header{
      position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(8px);
      background: linear-gradient(180deg, color-mix(in oklab, var(--bg), #000 20%) 0%, var(--bg) 100%);
      border-bottom:1px solid color-mix(in oklab, var(--panel), #000 35%);
    }
    .wrap{ max-width:1100px; margin:0 auto; padding:16px; }
    h1{ font-size: clamp(20px, 2.3vw, 32px); margin:0; }
    .sub{ color:var(--muted); font-size:14px; }

    .bar{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:12px; }
    .eras, .themes{ display:flex; gap:8px; flex-wrap:wrap; }
    button{
      appearance:none; border:1px solid transparent; background:var(--btn); color:var(--btn-fg);
      padding:8px 12px; border-radius:999px; font-weight:600; cursor:pointer; transition: .15s ease;
    }
    button:hover{ transform:translateY(-1px); box-shadow:0 6px 16px -8px var(--ring); }
    button:focus{ outline:2px solid transparent; box-shadow:0 0 0 3px var(--ring); }
    button[aria-current="true"]{ border-color:var(--accent); box-shadow:0 0 0 3px var(--ring) inset; }
    button[disabled]{ opacity:.45; cursor:not-allowed; }

    main{ padding:24px 0 64px; }
    .controls{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin: 8px 0 16px; }
    .controls .left{ display:flex; gap:10px; align-items:center; }
    .pill{ background:var(--panel); padding:8px 12px; border-radius:12px; border:1px solid color-mix(in oklab, var(--panel), #000 35%); }
    select{ background:var(--panel); color:var(--fg); border:1px solid color-mix(in oklab, var(--panel), #000 35%); border-radius:10px; padding:8px 12px; }
    .range{ color:var(--muted); font-variant-numeric:tabular-nums; }

    .grid{ display:grid; gap:16px; }
    .card{
      display:grid; grid-template-columns: minmax(260px, 420px) 1fr; gap:16px; align-items:start;
      background: var(--panel); border-radius:16px; padding:14px; border:1px solid color-mix(in oklab, var(--panel), #000 35%);
      box-shadow: 0 10px 30px -20px #0008;
    }
    .card img{ width:100%; height:260px; object-fit:cover; border-radius:12px; background: #1a1f3a; }
    .card h3{ margin:0 0 6px; font-size: clamp(18px, 1.8vw, 22px); }
    .year{ font-weight:700; letter-spacing:.5px; color:var(--accent); }
    .desc{ color:var(--muted); margin-top:6px; }

    @media (max-width: 860px){
      .card{ grid-template-columns: 1fr; }
      .card img{ height: 220px; }
      .controls{ flex-direction:column; align-items:stretch; }
      .controls .left{ justify-content:space-between; }
    }
  </style>
</head>
<body class="theme-dark">
  <header>
    <div class="wrap">
      <h1>Uchronie des véhicules
        <span class="sub">• prototype (toutes époques, 5 véhicules par page)</span>
      </h1>
      <div class="bar">
        <div class="eras" id="eraBar" aria-label="Choisir l'époque" role="tablist"></div>
        <div class="themes" aria-label="Thèmes">
          <button data-theme="light" title="Thème clair">Clair</button>
          <button data-theme="dark" title="Thème sombre" aria-current="true">Sombre</button>
          <button data-theme="night" title="Thème nuit">Nuit</button>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="controls">
      <div class="left">
        <span class="pill">Époque : <strong id="eraLabel">1925</strong></span>
        <span class="range" id="rangeLabel">(1925–1929)</span>
      </div>
      <label class="pill" for="pageSelect">Page 
        <select id="pageSelect" aria-label="Sélecteur de page"></select>
      </label>
    </div>

    <section class="grid" id="cards" aria-live="polite"></section>
  </main>

  <script>
    // ---------- Config ----------
    const ERAS = [1925, 1950, 1975, 2000, 2025, 2050, 2075, 2100, 2125]; // 9 boutons listés
    const ERA_SPAN_YEARS = 25;    // chaque époque couvre 25 ans (ex. 1925–1949)
    const PAGE_SIZE = 5;          // 5 véhicules par page

    // ---------- Éléments ----------
    const eraBar = document.getElementById('eraBar');
    const eraLabel = document.getElementById('eraLabel');
    const rangeLabel = document.getElementById('rangeLabel');
    const pageSelect = document.getElementById('pageSelect');
    const cards = document.getElementById('cards');

    // ---------- Thèmes ----------
    const root = document.body;
    const themeButtons = document.querySelectorAll('[data-theme]');
    const THEME_KEY = 'uchronie_theme';
    function applyTheme(name){
      root.classList.remove('theme-light','theme-dark','theme-night');
      root.classList.add(`theme-${name}`);
      themeButtons.forEach(b=>b.setAttribute('aria-current', b.dataset.theme===name ? 'true' : 'false'));
      localStorage.setItem(THEME_KEY, name);
    }
    // init theme
    applyTheme(localStorage.getItem(THEME_KEY) || 'dark');
    themeButtons.forEach(btn=>btn.addEventListener('click',()=>applyTheme(btn.dataset.theme)));

    // ---------- Fonction utilitaire pour les images ----------
    function getVehicleImage(year) {
      // Utiliser les vraies images pour les années spécifiées, placeholders pour les autres
      if (year === 1925 || year === 1926 || 
          year === 1930 || year === 1931 || year === 1932 || year === 1934 ||
          year === 1935 || year === 1936 || year === 1937 ||
          year === 1940 || year === 1941 || year === 1942 || year === 1943 || year === 1944 ||
          year === 1945 || year === 1946 || year === 1947 || year === 1948 || year === 1949 ||
          year === 1950 || year === 1951 || year === 1952 || year === 1953 || year === 1954 ||
          year === 1955 || year === 1956 || year === 1957 || year === 1958 || year === 1959        
        ) {
        return `img/${year}.png`;
      } else {
        return `https://via.placeholder.com/800x520?text=${encodeURIComponent('Véhicule '+year)}`;
      }
    }

    // ---------- Données (prototype pour l'époque 1925) ----------
    function makeVehiclesForEra(startYear){
      // couvre startYear .. startYear+24 (incl.)
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0); // années .0 ou .5
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 1950 ----------
    function makeVehiclesForEra1950(startYear){
      // couvre startYear .. startYear+24 (incl.)
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0); // années .0 ou .5
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 1975 ----------
    function makeVehiclesForEra1975(startYear){
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0);
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 2000 ----------
    function makeVehiclesForEra2000(startYear){
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0);
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 2025 ----------
    function makeVehiclesForEra2025(startYear){
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0);
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 2050 ----------
    function makeVehiclesForEra2050(startYear){
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0);
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 2075 ----------
    function makeVehiclesForEra2075(startYear){
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0);
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 2100 ----------
    function makeVehiclesForEra2100(startYear){
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0);
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    // ---------- Données pour l'époque 2125 ----------
    function makeVehiclesForEra2125(startYear){
      const out = [];
      for(let y=startYear; y<startYear+ERA_SPAN_YEARS; y++){
        const milestone = (y % 5 === 0);
        const title = milestone
          ? `Modèle phare ${y}`
          : `Transition ${y}`;
        const imgUrl = getVehicleImage(y);
        const blurb = milestone
          ? `Véhicule "phare" de l'année ${y}. Conçu pour franchir désert et plan d'eau sans arrêt. Mécanique simplifiée, plaques amphibies déployables, refroidissement par air.`
          : `Version de transition ${y}, héritant de ${y-1} et préfigurant ${y+1}. Ailerons sur charnières, admission protégée, réglage de flotteurs évolutif.`;
        out.push({ id: `car-${y}`, year:y, title, img:imgUrl, desc: blurb });
      }
      return out;
    }

    const DATA = {
      1925: makeVehiclesForEra(1925),
      1950: makeVehiclesForEra1950(1950),
      1975: makeVehiclesForEra1975(1975),
      2000: makeVehiclesForEra2000(2000),
      2025: makeVehiclesForEra2025(2025),
      2050: makeVehiclesForEra2050(2050),
      2075: makeVehiclesForEra2075(2075),
      2100: makeVehiclesForEra2100(2100),
      2125: makeVehiclesForEra2125(2125),
    };

    // ---------- UI : barre d'époques ----------
    function buildEraBar(currentEra){
      eraBar.innerHTML = '';
      ERAS.forEach(era => {
        const b = document.createElement('button');
        b.textContent = era;
        b.role = 'tab';
        b.setAttribute('aria-current', era===currentEra ? 'true' : 'false');
        if(!(era in DATA)){
          b.disabled = true; // pas encore prêt
          b.title = 'Bientôt';
        }else{
          b.addEventListener('click', ()=> navigate(era, 1));
        }
        eraBar.appendChild(b);
      });
    }

    // ---------- Rendu de page ----------
    function render(era, page){
      const vehicles = DATA[era];
      const totalPages = Math.ceil(vehicles.length / PAGE_SIZE);

      // labels
      eraLabel.textContent = era;
      const rangeStart = era;
      const rangeEnd = era + ERA_SPAN_YEARS - 1;
      const sliceStartYear = era + (page-1)*PAGE_SIZE;
      const sliceEndYear = Math.min(rangeStart + page*PAGE_SIZE - 1, rangeEnd);
      rangeLabel.textContent = `(${sliceStartYear}\u2013${sliceEndYear})`;

      // page select
      pageSelect.innerHTML = '';
      for(let p=1; p<=totalPages; p++){
        const opt = document.createElement('option');
        opt.value = p; opt.textContent = `Page ${p}`;
        if(p===page) opt.selected = true;
        pageSelect.appendChild(opt);
      }

      // cards
      const start = (page-1)*PAGE_SIZE;
      const end = start + PAGE_SIZE;
      const pageItems = vehicles.slice(start, end);

      cards.innerHTML = '';
      pageItems.forEach(v => {
        const art = document.createElement('article');
        art.className = 'card';
        art.innerHTML = `
          <img src="${v.img}" alt="Véhicule de ${v.year}" loading="lazy" />
          <div>
            <h3><span class="year">${v.year}</span> · ${v.title}</h3>
            <p class="desc">${v.desc}</p>
          </div>
        `;
        cards.appendChild(art);
      });
    }

    // ---------- Navigation (hash simple) ----------
    function navigate(era, page){
      location.hash = `#era=${era}&page=${page}`;
    }
    function parseHash(){
      const m = location.hash.match(/era=(\d+).*page=(\d+)/);
      const era = m ? parseInt(m[1],10) : 1925;
      const page = m ? parseInt(m[2],10) : 1;
      return {era, page};
    }
    window.addEventListener('hashchange', ()=>{
      const {era, page} = parseHash();
      buildEraBar(era);
      render(era, page);
    });

    // ---------- Init ----------
    (function init(){
      if(!location.hash) navigate(1925, 1);
      const {era, page} = parseHash();
      buildEraBar(era);
      render(era, page);
      pageSelect.addEventListener('change', e => navigate(parseHash().era, parseInt(e.target.value,10)));
    })();
  </script>
</body>
</html>
